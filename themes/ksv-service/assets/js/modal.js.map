{"version":3,"file":"/js/modal.js","mappings":"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","sources":["webpack://ksv-service/./src/components/modal/_.js","webpack://ksv-service/./src/components/utils/clickOutside/_.js","webpack://ksv-service/./src/components/utils/scrollLock/_.js","webpack://ksv-service/./node_modules/focus-lock/dist/es2015/utils/array.js","webpack://ksv-service/./node_modules/focus-lock/dist/es2015/utils/tabOrder.js","webpack://ksv-service/./node_modules/focus-lock/dist/es2015/utils/tabbables.js","webpack://ksv-service/./node_modules/focus-lock/dist/es2015/constants.js","webpack://ksv-service/./node_modules/focus-lock/dist/es2015/utils/tabUtils.js","webpack://ksv-service/./node_modules/focus-lock/dist/es2015/utils/DOMutils.js","webpack://ksv-service/./node_modules/focus-lock/dist/es2015/utils/firstFocus.js","webpack://ksv-service/./node_modules/focus-lock/dist/es2015/utils/all-affected.js","webpack://ksv-service/./node_modules/focus-lock/dist/es2015/focusMerge.js","webpack://ksv-service/./node_modules/focus-lock/dist/es2015/setFocus.js","webpack://ksv-service/./node_modules/focus-lock/dist/es2015/index.js","webpack://ksv-service/./node_modules/focus-lock/dist/es2015/focusIsHidden.js","webpack://ksv-service/./node_modules/focus-lock/dist/es2015/focusInside.js","webpack://ksv-service/./node_modules/dom-focus-lock/dist/index.esm.js"],"sourcesContent":["import { onScrollLockHandler, offScrollLockHandler } from \"@c/utils/scrollLock/_\";\nimport { onClickOutsideListener, offClickOutsideListener } from \"@c/utils/clickOutside/_\";\nimport focusLock from \"dom-focus-lock\";\n  \nlet $modal;\nlet $btnModalClose;\nconst classShow = \"modal--show\";\n\nconst onModalShow = (selector) => {\n  $modal = selector;\n  $btnModalClose = $modal.querySelector(\".js-modal-close\");\n\n  $modal.classList.add(classShow);\n  onModalHideHandler($btnModalClose);\n  onScrollLockHandler();\n  focusLock.on($modal);\n  onClickOutsideListener($modal, \".js-modal-wrapper\", onModalHide);\n}\n\nconst onModalHide = () => {\n  $modal.classList.remove(classShow);\n  offModalHideHandler($btnModalClose);\n  offScrollLockHandler();\n  focusLock.off($modal);\n  offClickOutsideListener();\n}\n\nconst onModalHideHandler = (selector) => {\n  selector.addEventListener(\"click\", onModalHide);\n}\n\nconst offModalHideHandler = (selector) => {\n  selector.removeEventListener(\"click\", onModalHide);\n}\n\nexport default function initModal($modalBtnOpen) {\n  $modalBtnOpen.addEventListener(\"click\", function(e) {\n    const $modal = $modalBtnOpen.parentNode.querySelector(\".js-modal\");\n    e.preventDefault();\n    onModalShow($modal);\n  })\n}","let outsideClickListener;\n\nconst onClickOutsideListener = (element, selector, action) => {\n  outsideClickListener = event => {\n    if (event.target.contains(element) && event.target.closest(selector) === null) {\n      action()\n      offClickOutsideListener()\n    }\n  }\n\n  document.addEventListener('click', outsideClickListener)\n}\n\nconst offClickOutsideListener = () => {\n  document.removeEventListener('click', outsideClickListener)\n}\n\nexport { onClickOutsideListener, offClickOutsideListener }","const onScrollLockHandler = () => {\n  const scrollTop = window.pageYOffset || document.documentElement.scrollTop;\n  const scrollLeft = window.pageXOffset || document.documentElement.scrollLeft;\n\n      window.onscroll = function() {\n          window.scrollTo(scrollLeft, scrollTop);\n      };\n}\n\nconst offScrollLockHandler = () => {\n  window.onscroll = function() {};\n}\n\nexport { onScrollLockHandler, offScrollLockHandler };","export var toArray = function toArray(a) {\n  var ret = Array(a.length);\n  for (var i = 0; i < a.length; ++i) {\n    ret[i] = a[i];\n  }\n  return ret;\n};\n\nexport var arrayFind = function arrayFind(array, search) {\n  return array.filter(function (a) {\n    return a === search;\n  })[0];\n};\n\nexport var asArray = function asArray(a) {\n  return Array.isArray(a) ? a : [a];\n};","import { toArray } from './array';\n\nexport var tabSort = function tabSort(a, b) {\n  var tabDiff = a.tabIndex - b.tabIndex;\n  var indexDiff = a.index - b.index;\n\n  if (tabDiff) {\n    if (!a.tabIndex) return 1;\n    if (!b.tabIndex) return -1;\n  }\n\n  return tabDiff || indexDiff;\n};\n\nexport var orderByTabIndex = function orderByTabIndex(nodes, filterNegative, keepGuards) {\n  return toArray(nodes).map(function (node, index) {\n    return {\n      node: node,\n      index: index,\n      tabIndex: keepGuards && node.tabIndex === -1 ? (node.dataset || {}).focusGuard ? 0 : -1 : node.tabIndex\n    };\n  }).filter(function (data) {\n    return !filterNegative || data.tabIndex >= 0;\n  }).sort(tabSort);\n};","export default ['button:enabled:not([readonly])', 'select:enabled:not([readonly])', 'textarea:enabled:not([readonly])', 'input:enabled:not([readonly])', 'a[href]', 'area[href]', 'iframe', 'object', 'embed', '[tabindex]', '[contenteditable]', '[autofocus]'];","export var FOCUS_GROUP = 'data-focus-lock';\nexport var FOCUS_DISABLED = 'data-focus-lock-disabled';\nexport var FOCUS_ALLOW = 'data-no-focus-lock';\nexport var FOCUS_AUTO = 'data-autofocus-inside';","import tabbables from './tabbables';\nimport { toArray } from './array';\nimport { FOCUS_AUTO } from '../constants';\n\nvar queryTabbables = tabbables.join(',');\nvar queryGuardTabbables = queryTabbables + ', [data-focus-guard]';\n\nexport var getFocusables = function getFocusables(parents, withGuards) {\n  return parents.reduce(function (acc, parent) {\n    return acc.concat(\n    // add all tabbables inside\n    toArray(parent.querySelectorAll(withGuards ? queryGuardTabbables : queryTabbables)),\n    // add if node is tabble itself\n    parent.parentNode ? toArray(parent.parentNode.querySelectorAll(tabbables.join(','))).filter(function (node) {\n      return node === parent;\n    }) : []);\n  }, []);\n};\n\nexport var getParentAutofocusables = function getParentAutofocusables(parent) {\n  var parentFocus = parent.querySelectorAll('[' + FOCUS_AUTO + ']');\n  return toArray(parentFocus).map(function (node) {\n    return getFocusables([node]);\n  }).reduce(function (acc, nodes) {\n    return acc.concat(nodes);\n  }, []);\n};","import { orderByTabIndex } from './tabOrder';\nimport { getFocusables, getParentAutofocusables } from './tabUtils';\nimport { toArray } from './array';\n\nvar isElementHidden = function isElementHidden(computedStyle) {\n  if (!computedStyle || !computedStyle.getPropertyValue) {\n    return false;\n  }\n  return computedStyle.getPropertyValue('display') === 'none' || computedStyle.getPropertyValue('visibility') === 'hidden';\n};\n\nexport var isVisible = function isVisible(node) {\n  return !node || node === document || node.nodeType === Node.DOCUMENT_NODE || !isElementHidden(window.getComputedStyle(node, null)) && isVisible(node.parentNode);\n};\n\nexport var notHiddenInput = function notHiddenInput(node) {\n  return !((node.tagName === 'INPUT' || node.tagName === 'BUTTON') && (node.type === 'hidden' || node.disabled));\n};\n\nvar getParents = function getParents(node) {\n  var parents = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n\n  parents.push(node);\n  if (node.parentNode) {\n    getParents(node.parentNode, parents);\n  }\n  return parents;\n};\n\nexport var getCommonParent = function getCommonParent(nodea, nodeb) {\n  var parentsA = getParents(nodea);\n  var parentsB = getParents(nodeb);\n\n  for (var i = 0; i < parentsA.length; i += 1) {\n    var currentParent = parentsA[i];\n    if (parentsB.indexOf(currentParent) >= 0) {\n      return currentParent;\n    }\n  }\n  return false;\n};\n\nexport var filterFocusable = function filterFocusable(nodes) {\n  return toArray(nodes).filter(function (node) {\n    return isVisible(node);\n  }).filter(function (node) {\n    return notHiddenInput(node);\n  });\n};\n\nexport var getTabbableNodes = function getTabbableNodes(topNodes, withGuards) {\n  return orderByTabIndex(filterFocusable(getFocusables(topNodes, withGuards)), true, withGuards);\n};\n\nexport var getAllTabbableNodes = function getAllTabbableNodes(topNodes) {\n  return orderByTabIndex(filterFocusable(getFocusables(topNodes)), false);\n};\n\nexport var parentAutofocusables = function parentAutofocusables(topNode) {\n  return filterFocusable(getParentAutofocusables(topNode));\n};","var isRadio = function isRadio(node) {\n  return node.tagName === 'INPUT' && node.type === 'radio';\n};\n\nvar findSelectedRadio = function findSelectedRadio(node, nodes) {\n  return nodes.filter(isRadio).filter(function (el) {\n    return el.name === node.name;\n  }).filter(function (el) {\n    return el.checked;\n  })[0] || node;\n};\n\nvar pickFirstFocus = function pickFirstFocus(nodes) {\n  if (nodes[0] && nodes.length > 1) {\n    if (isRadio(nodes[0]) && nodes[0].name) {\n      return findSelectedRadio(nodes[0], nodes);\n    }\n  }\n  return nodes[0];\n};\n\nexport var pickFocusable = function pickFocusable(nodes, index) {\n  if (nodes.length > 1) {\n    if (isRadio(nodes[index]) && nodes[index].name) {\n      return nodes.indexOf(findSelectedRadio(nodes[index], nodes));\n    }\n  }\n  return index;\n};\n\nexport default pickFirstFocus;","var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nimport { FOCUS_DISABLED, FOCUS_GROUP } from '../constants';\nimport { asArray, toArray } from './array';\n\nvar filterNested = function filterNested(nodes) {\n  var l = nodes.length;\n  for (var i = 0; i < l; i += 1) {\n    var _loop = function _loop(j) {\n      if (i !== j) {\n        if (nodes[i].contains(nodes[j])) {\n          return {\n            v: filterNested(nodes.filter(function (x) {\n              return x !== nodes[j];\n            }))\n          };\n        }\n      }\n    };\n\n    for (var j = 0; j < l; j += 1) {\n      var _ret = _loop(j);\n\n      if ((typeof _ret === 'undefined' ? 'undefined' : _typeof(_ret)) === \"object\") return _ret.v;\n    }\n  }\n  return nodes;\n};\n\nvar getTopParent = function getTopParent(node) {\n  return node.parentNode ? getTopParent(node.parentNode) : node;\n};\n\nvar getAllAffectedNodes = function getAllAffectedNodes(node) {\n  var nodes = asArray(node);\n  return nodes.filter(Boolean).reduce(function (acc, currentNode) {\n    var group = currentNode.getAttribute(FOCUS_GROUP);\n    acc.push.apply(acc, group ? filterNested(toArray(getTopParent(currentNode).querySelectorAll('[' + FOCUS_GROUP + '=\"' + group + '\"]:not([' + FOCUS_DISABLED + '=\"disabled\"])'))) : [currentNode]);\n    return acc;\n  }, []);\n};\n\nexport default getAllAffectedNodes;","import { getCommonParent, getTabbableNodes, getAllTabbableNodes, parentAutofocusables } from './utils/DOMutils';\nimport pickFirstFocus, { pickFocusable } from './utils/firstFocus';\nimport getAllAffectedNodes from './utils/all-affected';\nimport { asArray } from './utils/array';\n\nvar findAutoFocused = function findAutoFocused(autoFocusables) {\n  return function (node) {\n    return !!node.autofocus || node.dataset && !!node.dataset.autofocus || autoFocusables.indexOf(node) >= 0;\n  };\n};\n\nvar isGuard = function isGuard(node) {\n  return node && node.dataset && node.dataset.focusGuard;\n};\nvar notAGuard = function notAGuard(node) {\n  return !isGuard(node);\n};\n\nexport var newFocus = function newFocus(innerNodes, outerNodes, activeElement, lastNode, autoFocused) {\n  var cnt = innerNodes.length;\n  var firstFocus = innerNodes[0];\n  var lastFocus = innerNodes[cnt - 1];\n  var isOnGuard = isGuard(activeElement);\n\n  // focus is inside\n  if (innerNodes.indexOf(activeElement) >= 0) {\n    return undefined;\n  }\n\n  var activeIndex = outerNodes.indexOf(activeElement);\n  var lastIndex = outerNodes.indexOf(lastNode || activeIndex);\n  var lastNodeInside = innerNodes.indexOf(lastNode);\n  var indexDiff = activeIndex - lastIndex;\n  var firstNodeIndex = outerNodes.indexOf(firstFocus);\n  var lastNodeIndex = outerNodes.indexOf(lastFocus);\n\n  var returnFirstNode = pickFocusable(innerNodes, 0);\n  var returnLastNode = pickFocusable(innerNodes, cnt - 1);\n\n  // new focus\n  if (activeIndex === -1 || lastNodeInside === -1) {\n    return innerNodes.indexOf(autoFocused && autoFocused.length ? pickFirstFocus(autoFocused) : pickFirstFocus(innerNodes));\n  }\n  // old focus\n  if (!indexDiff && lastNodeInside >= 0) {\n    return lastNodeInside;\n  }\n  // first element\n  if (activeIndex <= firstNodeIndex && isOnGuard && Math.abs(indexDiff) > 1) {\n    return returnLastNode;\n  }\n  // last element\n  if (activeIndex >= firstNodeIndex && isOnGuard && Math.abs(indexDiff) > 1) {\n    return returnFirstNode;\n  }\n  // jump out, but not on the guard\n  if (indexDiff && Math.abs(indexDiff) > 1) {\n    return lastNodeInside;\n  }\n  // focus above lock\n  if (activeIndex <= firstNodeIndex) {\n    return returnLastNode;\n  }\n  // focus below lock\n  if (activeIndex > lastNodeIndex) {\n    return returnFirstNode;\n  }\n  // index is inside tab order, but outside Lock\n  if (indexDiff) {\n    if (Math.abs(indexDiff) > 1) {\n      return lastNodeInside;\n    }\n    return (cnt + lastNodeInside + indexDiff) % cnt;\n  }\n  // do nothing\n  return undefined;\n};\n\nvar getTopCommonParent = function getTopCommonParent(baseActiveElement, leftEntry, rightEntries) {\n  var activeElements = asArray(baseActiveElement);\n  var leftEntries = asArray(leftEntry);\n  var activeElement = activeElements[0];\n  var topCommon = null;\n  leftEntries.filter(Boolean).forEach(function (entry) {\n    topCommon = getCommonParent(topCommon || entry, entry) || topCommon;\n    rightEntries.filter(Boolean).forEach(function (subEntry) {\n      var common = getCommonParent(activeElement, subEntry);\n      if (common) {\n        if (!topCommon || common.contains(topCommon)) {\n          topCommon = common;\n        } else {\n          topCommon = getCommonParent(common, topCommon);\n        }\n      }\n    });\n  });\n  return topCommon;\n};\n\nvar allParentAutofocusables = function allParentAutofocusables(entries) {\n  return entries.reduce(function (acc, node) {\n    return acc.concat(parentAutofocusables(node));\n  }, []);\n};\n\nvar reorderNodes = function reorderNodes(srcNodes, dstNodes) {\n  var remap = new Map();\n  // no Set(dstNodes) for IE11 :(\n  dstNodes.forEach(function (entity) {\n    return remap.set(entity.node, entity);\n  });\n  // remap to dstNodes\n  return srcNodes.map(function (node) {\n    return remap.get(node);\n  }).filter(Boolean);\n};\n\nexport var getFocusabledIn = function getFocusabledIn(topNode) {\n  var entries = getAllAffectedNodes(topNode).filter(notAGuard);\n  var commonParent = getTopCommonParent(topNode, topNode, entries);\n  var outerNodes = getTabbableNodes([commonParent], true);\n  var innerElements = getTabbableNodes(entries).filter(function (_ref) {\n    var node = _ref.node;\n    return notAGuard(node);\n  }).map(function (_ref2) {\n    var node = _ref2.node;\n    return node;\n  });\n\n  return outerNodes.map(function (_ref3) {\n    var node = _ref3.node,\n        index = _ref3.index;\n    return {\n      node: node,\n      index: index,\n      lockItem: innerElements.indexOf(node) >= 0,\n      guard: isGuard(node)\n    };\n  });\n};\n\nvar getFocusMerge = function getFocusMerge(topNode, lastNode) {\n  var activeElement = document && document.activeElement;\n  var entries = getAllAffectedNodes(topNode).filter(notAGuard);\n\n  var commonParent = getTopCommonParent(activeElement || topNode, topNode, entries);\n\n  var innerElements = getTabbableNodes(entries).filter(function (_ref4) {\n    var node = _ref4.node;\n    return notAGuard(node);\n  });\n\n  if (!innerElements[0]) {\n    innerElements = getAllTabbableNodes(entries).filter(function (_ref5) {\n      var node = _ref5.node;\n      return notAGuard(node);\n    });\n    if (!innerElements[0]) {\n      return undefined;\n    }\n  }\n\n  var outerNodes = getTabbableNodes([commonParent]).map(function (_ref6) {\n    var node = _ref6.node;\n    return node;\n  });\n  var orderedInnerElements = reorderNodes(outerNodes, innerElements);\n  var innerNodes = orderedInnerElements.map(function (_ref7) {\n    var node = _ref7.node;\n    return node;\n  });\n\n  var newId = newFocus(innerNodes, outerNodes, activeElement, lastNode, innerNodes.filter(findAutoFocused(allParentAutofocusables(entries))));\n\n  if (newId === undefined) {\n    return newId;\n  }\n  return orderedInnerElements[newId];\n};\n\nexport default getFocusMerge;","import getFocusMerge from './focusMerge';\n\nexport var focusOn = function focusOn(target) {\n  target.focus();\n  if (target.contentWindow) {\n    target.contentWindow.focus();\n  }\n};\n\nvar guardCount = 0;\nvar lockDisabled = false;\n\nexport default (function (topNode, lastNode) {\n  var focusable = getFocusMerge(topNode, lastNode);\n\n  if (lockDisabled) {\n    return;\n  }\n\n  if (focusable) {\n    if (guardCount > 2) {\n      // eslint-disable-next-line no-console\n      console.error('FocusLock: focus-fighting detected. Only one focus management system could be active. ' + 'See https://github.com/theKashey/focus-lock/#focus-fighting');\n      lockDisabled = true;\n      setTimeout(function () {\n        lockDisabled = false;\n      }, 1);\n      return;\n    }\n    guardCount++;\n    focusOn(focusable.node);\n    guardCount--;\n  }\n});","import tabHook from './tabHook';\nimport focusMerge, { getFocusabledIn } from './focusMerge';\nimport focusInside from './focusInside';\nimport focusIsHidden from './focusIsHidden';\nimport setFocus from './setFocus';\nimport * as constants from './constants';\nimport getAllAffectedNodes from './utils/all-affected';\n\nexport { tabHook, focusInside, focusIsHidden, focusMerge, getFocusabledIn, constants, getAllAffectedNodes };\n\nexport default setFocus;","import { toArray } from './utils/array';\nimport { FOCUS_ALLOW } from './constants';\n\nvar focusIsHidden = function focusIsHidden() {\n  return document && toArray(document.querySelectorAll('[' + FOCUS_ALLOW + ']')).some(function (node) {\n    return node.contains(document.activeElement);\n  });\n};\n\nexport default focusIsHidden;","import getAllAffectedNodes from './utils/all-affected';\nimport { arrayFind, toArray } from './utils/array';\n\nvar focusInFrame = function focusInFrame(frame) {\n  return frame === document.activeElement;\n};\n\nvar focusInsideIframe = function focusInsideIframe(topNode) {\n  return !!arrayFind(toArray(topNode.querySelectorAll('iframe')), focusInFrame);\n};\n\nvar focusInside = function focusInside(topNode) {\n  var activeElement = document && document.activeElement;\n\n  if (!activeElement || activeElement.dataset && activeElement.dataset.focusGuard) {\n    return false;\n  }\n  return getAllAffectedNodes(topNode).reduce(function (result, node) {\n    return result || node.contains(activeElement) || focusInsideIframe(node);\n  }, false);\n};\n\nexport default focusInside;","import moveFocusInside, { focusIsHidden, focusInside } from 'focus-lock';\n\nvar lastActiveTrap = 0;\nvar lastActiveFocus = null;\n\nvar focusOnBody = function focusOnBody() {\n  return document && document.activeElement === document.body;\n};\n\nvar isFreeFocus = function isFreeFocus() {\n  return focusOnBody() || focusIsHidden();\n};\n\nvar activateTrap = function activateTrap() {\n  var result = false;\n\n  if (lastActiveTrap) {\n    var observed = lastActiveTrap;\n\n    if (!isFreeFocus()) {\n      if (observed && !focusInside(observed)) {\n        result = moveFocusInside(observed, lastActiveFocus);\n      }\n\n      lastActiveFocus = document.activeElement;\n    }\n  }\n\n  return result;\n};\n\nvar reducePropsToState = function reducePropsToState(propsList) {\n  return propsList.filter(function (node) {\n    return node;\n  }).slice(-1)[0];\n};\n\nvar handleStateChangeOnClient = function handleStateChangeOnClient(trap) {\n  lastActiveTrap = trap;\n\n  if (trap) {\n    activateTrap();\n  }\n};\n\nvar instances = [];\n\nvar emitChange = function emitChange(event) {\n  if (handleStateChangeOnClient(reducePropsToState(instances))) {\n    event && event.preventDefault();\n    return true;\n  }\n\n  return false;\n};\n\nvar attachHandler = function attachHandler() {\n  document.addEventListener('focusin', emitChange);\n};\n\nvar detachHandler = function detachHandler() {\n  document.removeEventListener('focusin', emitChange);\n};\n\nvar focusLock = {\n  on: function on(domNode) {\n    if (instances.length === 0) {\n      attachHandler();\n    }\n\n    if (instances.indexOf(domNode) < 0) {\n      instances.push(domNode);\n      emitChange();\n    }\n  },\n  off: function off(domNode) {\n    instances = instances.filter(function (node) {\n      return node !== domNode;\n    });\n    emitChange();\n\n    if (instances.length === 0) {\n      detachHandler();\n    }\n  }\n};\n\nexport default focusLock;\n"],"names":["$modal","$btnModalClose","classShow","onModalShow","selector","querySelector","classList","add","onModalHideHandler","onScrollLockHandler","focusLock","onClickOutsideListener","onModalHide","remove","offModalHideHandler","offScrollLockHandler","offClickOutsideListener","addEventListener","removeEventListener","initModal","$modalBtnOpen","e","parentNode","preventDefault","outsideClickListener","element","action","event","target","contains","closest","document","scrollTop","window","pageYOffset","documentElement","scrollLeft","pageXOffset","onscroll","scrollTo","toArray","a","ret","Array","length","i","asArray","isArray","tabSort","b","tabDiff","tabIndex","indexDiff","index","orderByTabIndex","nodes","filterNegative","keepGuards","map","node","dataset","focusGuard","filter","data","sort","FOCUS_GROUP","queryTabbables","tabbables","join","queryGuardTabbables","getFocusables","parents","withGuards","reduce","acc","parent","concat","querySelectorAll","isVisible","nodeType","Node","DOCUMENT_NODE","computedStyle","getComputedStyle","getPropertyValue","getParents","arguments","undefined","push","getCommonParent","nodea","nodeb","parentsA","parentsB","currentParent","indexOf","filterFocusable","tagName","type","disabled","notHiddenInput","topNodes","parentAutofocusables","topNode","parentFocus","isRadio","findSelectedRadio","el","name","checked","pickFocusable","_typeof","Symbol","iterator","obj","constructor","prototype","filterNested","l","_loop","j","v","x","_ret","getTopParent","Boolean","currentNode","group","getAttribute","apply","isGuard","notAGuard","getTopCommonParent","baseActiveElement","leftEntry","rightEntries","activeElements","leftEntries","activeElement","topCommon","forEach","entry","subEntry","common","lastNode","entries","commonParent","innerElements","_ref4","_ref5","srcNodes","dstNodes","remap","autoFocusables","outerNodes","_ref6","orderedInnerElements","Map","entity","set","get","innerNodes","_ref7","newId","autoFocused","cnt","firstFocus","lastFocus","isOnGuard","activeIndex","lastIndex","lastNodeInside","firstNodeIndex","lastNodeIndex","returnFirstNode","returnLastNode","Math","abs","newFocus","allParentAutofocusables","autofocus","guardCount","lockDisabled","focusable","console","error","setTimeout","focus","contentWindow","some","focusInFrame","frame","result","array","search","focusInsideIframe","lastActiveTrap","lastActiveFocus","isFreeFocus","body","handleStateChangeOnClient","trap","observed","activateTrap","instances","emitChange","propsList","slice","on","domNode","off"],"sourceRoot":""}